!function(n,e){function t(n){return n=n.toLowerCase(),n=n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),n=n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),n=n.replace(/ì|í|ị|ỉ|ĩ/g,"i"),n=n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),n=n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),n=n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),n=n.replace(/đ/g,"d"),n=n.replace(/\W+/g," "),n=n.replace(/\s/g,"-")}function r(e){return n("<section>").addClass("ins-section").append(n("<header>").addClass("ins-section-header").text(e))}function a(t,r,a,i,s){return n("<div>").addClass("ins-selectable").addClass("ins-search-item").append(n("<header>").append(n("<i>").addClass("fa").addClass("fa-"+t)).append(null!=r&&""!=r?r:e.TRANSLATION.UNTITLED).append(a?n("<span>").addClass("ins-slug").text(a):null)).append(i?n("<p>").addClass("ins-search-preview").text(i):null).attr("data-url",s)}function i(n,t){var i,s;if(0===t.length)return null;switch(i=e.TRANSLATION[n],n){case"POSTS":case"PAGES":s=t.map(function(n){return a("file",n.title,null,n.excerpt.slice(0,150),e.ROOT_URL+n.path)});break;case"CATEGORIES":case"TAGS":s=t.map(function(e){return a("CATEGORIES"===n?"folder":"tag",e.name,e.slug,null,e.permalink)});break;default:return null}return r(i).append(s)}function s(n,e){var t={},r=n.pages.concat(n.posts);r.forEach(function(n){n[e]&&n[e].forEach(function(n){t[n.name]=n})});var a=[];for(var e in t)a.push(t[e]);return a}function o(n){return n.split(" ").filter(function(n){return!!n}).map(function(n){return n.toUpperCase()})}function c(n,e,r){var a=o(n),i=a.filter(function(n){var a=r.filter(function(r){return!!e.hasOwnProperty(r)&&(t(e[r]).toUpperCase().indexOf(n)>-1||void 0)});return a.length>0});return i.length===a.length}function u(n){return{POST:function(e){return c(n,e,["title","text"])},PAGE:function(e){return c(n,e,["title","text"])},CATEGORY:function(e){return c(n,e,["name","slug"])},TAG:function(e){return c(n,e,["name","slug"])}}}function l(n,e,t,r){var a=0;return o(n).forEach(function(n){var i=new RegExp(n,"img");t.forEach(function(n,t){if(e.hasOwnProperty(n)){var s=e[n].match(i);a+=s?s.length*r[t]:0}})}),a}function f(n){return{POST:function(e){return l(n,e,["title","text"],[3,1])},PAGE:function(e){return l(n,e,["title","text"],[3,1])},CATEGORY:function(e){return l(n,e,["name","slug"],[1,1])},TAG:function(e){return l(n,e,["name","slug"],[1,1])}}}function p(n,e){var t=f(e),r=u(e),a=n.posts,i=n.pages,o=s(n,"tags"),c=s(n,"categories");return{posts:a.filter(r.POST).sort(function(n,e){return t.POST(e)-t.POST(n)}).slice(0,5),pages:i.filter(r.PAGE).sort(function(n,e){return t.PAGE(e)-t.PAGE(n)}).slice(0,5),categories:c.filter(r.CATEGORY).sort(function(n,e){return t.CATEGORY(e)-t.CATEGORY(n)}).slice(0,5),tags:o.filter(r.TAG).sort(function(n,e){return t.TAG(e)-t.TAG(n)}).slice(0,5)}}function d(n){A.empty();for(var e in n)A.append(i(e.toUpperCase(),n[e]))}function h(n){if(0!==n.length){var e=m[0].clientHeight,t=n.position().top-m.scrollTop(),r=n[0].clientHeight+n.position().top;r>e+m.scrollTop()&&m.scrollTop(r-m[0].clientHeight),t<0&&m.scrollTop(n.position().top)}}function g(e){var t=n.makeArray(A.find(".ins-selectable")),r=-1;t.forEach(function(e,t){if(n(e).hasClass("active"))return void(r=t)});var a=(t.length+r+e)%t.length;n(t[r]).removeClass("active"),n(t[a]).addClass("active"),h(n(t[a]))}function T(n){n&&n.length&&(location.href=n.attr("data-url"))}var C=n(".ins-search"),v=C.find(".ins-search-input"),m=C.find(".ins-section-wrapper"),A=C.find(".ins-section-container");C.parent().remove(".ins-search"),n("body").append(C),n.getJSON(e.CONTENT_URL,function(e){"#ins-search"===location.hash.trim()&&C.addClass("show"),v.on("input",function(){var r=t(n.trim(n(this).val()));d(p(e,r))}),v.trigger("input")}),n(document).on("click focus",".search-form-input",function(){C.addClass("show"),C.find(".ins-search-input").focus()}).on("click",".ins-search-item",function(){T(n(this))}).on("click",".ins-close",function(){C.removeClass("show")}).on("keydown",function(n){if(C.hasClass("show"))switch(n.keyCode){case 27:C.removeClass("show");break;case 38:g(-1);break;case 40:g(1);break;case 13:T(A.find(".ins-selectable.active").eq(0))}})}(jQuery,window.INSIGHT_CONFIG);